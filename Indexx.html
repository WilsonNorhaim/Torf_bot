<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
    <title>Floky ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞...</title>
    <!-- Font Awesome 6 (–∏–∫–æ–Ω–∫–∏) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }

        /* –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç–µ–º—ã (—Ç—ë–º–Ω–∞—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é ‚Äî —Å–∏–Ω–µ-—Ñ–∏–æ–ª–µ—Ç–æ–≤–∞—è –Ω–æ—á—å) */
        body {
            --bg-gradient: radial-gradient(circle at 30% 20%, #121c2f, #040918);
            --glass-bg: rgba(25, 30, 50, 0.4);
            --glass-border: rgba(150, 130, 220, 0.3);
            --text-primary: #f0f2ff;
            --text-secondary: #b5c0e0;
            --accent: #9b7aff;
            --accent-glow: rgba(155, 122, 255, 0.5);
            --nav-bg: rgba(20, 22, 40, 0.7);
            --reaction-inactive: #a5b3d9;
            transition: background 0.3s, color 0.2s;
            background: var(--bg-gradient);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            padding: 0 0 80px 0;
        }

        /* —Å–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞ (—É–Ω–∏—Å–µ–∫—Å, —Ö–æ–ª–æ–¥–Ω—ã–π —Ñ–∏–æ–ª–µ—Ç) */
        body.light-theme {
            --bg-gradient: radial-gradient(circle at 30% 20%, #e3e9f5, #cbd5e8);
            --glass-bg: rgba(240, 240, 255, 0.6);
            --glass-border: rgba(120, 100, 200, 0.3);
            --text-primary: #10141e;
            --text-secondary: #2f3a5c;
            --accent: #7f62e6;
            --accent-glow: rgba(127, 98, 230, 0.4);
            --nav-bg: rgba(230, 230, 250, 0.7);
            --reaction-inactive: #4f5299;
        }

        /* –∑–∞–≥—Ä—É–∑–æ—á–Ω—ã–π —ç–∫—Ä–∞–Ω */
        .splash-screen {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: #0b0e1a;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            transition: opacity 0.8s ease, visibility 0.8s;
            backdrop-filter: blur(8px);
        }
        .splash-logo {
            width: 120px;
            height: 120px;
            background: url('Floky.png') center/cover no-repeat;
            border-radius: 40px;
            box-shadow: 0 0 50px #ac8eff, 0 20px 40px -10px #220066;
            animation: pulseGlow 1.5s infinite alternate;
        }
        @keyframes pulseGlow {
            from { box-shadow: 0 0 30px #9f85ff, 0 10px 30px -5px #3e1a9e; transform: scale(1); }
            to { box-shadow: 0 0 70px #c6aeff, 0 20px 50px -5px #5c31c2; transform: scale(1.03); }
        }
        .splash-text {
            margin-top: 25px;
            font-size: 42px;
            font-weight: 800;
            background: linear-gradient(145deg, #dcc9ff, #ad90ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            letter-spacing: 2px;
        }
        .splash-sub {
            color: #a8b3e0;
            margin-top: 8px;
        }

        /* –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä ‚Äî –∞–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è */
        .app-container {
            width: 100%;
            max-width: 480px;
            margin: 0 auto;
            position: relative;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease, transform 0.5s ease;
        }
        .app-container.visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* —Å—Ç–µ–∫–ª—è–Ω–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ */
        .glass-card, .post-card, .profile-header, .bottom-nav, .story-item, .comment-box, .search-bar, .settings-item, .notice-item {
            background: var(--glass-bg);
            backdrop-filter: blur(18px) saturate(180%);
            -webkit-backdrop-filter: blur(18px) saturate(180%);
            border: 1px solid var(--glass-border);
            border-radius: 28px;
            box-shadow: 0 20px 40px -15px rgba(0, 0, 0, 0.5), inset 0 1px 1px rgba(255, 255, 255, 0.1);
            transition: all 0.25s ease;
        }

        /* —à–∞–ø–∫–∞ */
        .top-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 20px;
        }
        .logo-area {
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
        }
        .logo-img {
            width: 40px;
            height: 40px;
            background: url('Floky.png') center/cover no-repeat;
            border-radius: 14px;
            background-color: #6e4bff;
        }
        .logo-text {
            font-size: 28px;
            font-weight: 800;
            background: linear-gradient(135deg, #cfb5ff, #a57cff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .theme-toggle {
            background: rgba(200, 180, 255, 0.15);
            border: 1px solid var(--glass-border);
            border-radius: 60px;
            padding: 8px 14px;
            color: #d9c9ff;
            font-size: 18px;
            cursor: pointer;
            transition: 0.2s;
        }
        .theme-toggle:active { transform: scale(0.9); background: var(--accent); color: white; }

        /* –ø–æ–∏—Å–∫ */
        .search-bar {
            margin: 8px 16px 16px;
            padding: 10px 18px;
            display: flex;
            align-items: center;
            gap: 12px;
            color: var(--text-secondary);
        }
        .search-bar i { font-size: 18px; }
        .search-bar input {
            background: transparent;
            border: none;
            color: var(--text-primary);
            font-size: 16px;
            width: 100%;
            outline: none;
        }
        .search-bar input::placeholder { color: var(--text-secondary); opacity: 0.7; }

        /* –∏—Å—Ç–æ—Ä–∏–∏ (—Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ) */
        .stories-row {
            display: flex;
            gap: 14px;
            padding: 8px 16px;
            overflow-x: auto;
            margin-bottom: 10px;
        }
        .stories-row::-webkit-scrollbar { display: none; }
        .story-item {
            min-width: 70px;
            height: 70px;
            border-radius: 35px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border: 2px solid var(--accent);
            color: var(--text-primary);
            font-size: 12px;
        }

        /* –Ω–∏–∂–Ω—è—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è */
        .bottom-nav {
            position: fixed;
            bottom: 12px;
            left: 50%;
            transform: translateX(-50%);
            width: calc(100% - 32px);
            max-width: 440px;
            display: flex;
            justify-content: space-around;
            padding: 8px 10px;
            border-radius: 60px;
            background: var(--nav-bg);
            z-index: 1000;
            border: 1px solid var(--glass-border);
        }
        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            color: var(--text-secondary);
            font-size: 12px;
            transition: 0.15s;
            cursor: pointer;
            padding: 6px 16px;
            border-radius: 40px;
        }
        .nav-item i { font-size: 22px; margin-bottom: 3px; }
        .nav-item.active {
            background: var(--accent);
            color: white;
            box-shadow: 0 0 15px var(--accent-glow);
        }

        /* —Å–µ–∫—Ü–∏–∏ (–ø–µ—Ä–µ–∫–ª—é—á–∞—é—Ç—Å—è) */
        .section {
            display: none;
            animation: fadeIn 0.3s ease;
        }
        .section.active-section { display: block; }
        @keyframes fadeIn { 0% { opacity: 0.3; } 100% { opacity: 1; } }

        /* –ø–æ—Å—Ç */
        .post-card {
            margin: 16px;
            padding: 16px 14px 12px;
            transition: 0.2s;
            position: relative;
        }
        .post-card.reacted-flame {
            box-shadow: 0 0 30px #ff7b00, 0 0 15px #f60 inset;
            border-color: #ffb347;
            background: rgba(70, 40, 20, 0.5);
            transition: 0.1s;
        }

        .post-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
        }
        .post-avatar {
            width: 48px; height: 48px; border-radius: 50%;
            background: linear-gradient(145deg, #b28aff, #6d3bcf);
            display: flex; align-items: center; justify-content: center;
            color: white; font-size: 24px; font-weight: bold;
            cursor: pointer;
        }
        .post-user-info {
            flex: 1;
            cursor: pointer;
        }
        .post-user-info .name { font-weight: 700; color: var(--text-primary); }
        .post-user-info .handle { color: var(--text-secondary); font-size: 13px; }
        .three-dots {
            color: var(--text-secondary);
            font-size: 22px;
            padding: 8px;
            background: rgba(0,0,0,0.15);
            border-radius: 30px;
            cursor: pointer;
            position: relative;
        }

        .dots-menu {
            position: absolute; right: 0; top: 40px;
            background: var(--nav-bg);
            backdrop-filter: blur(30px);
            border-radius: 20px;
            padding: 10px 0;
            display: none; flex-direction: column;
            z-index: 1100;
            border: 1px solid var(--glass-border);
            min-width: 160px;
        }
        .dots-menu.show { display: flex; }
        .dots-menu span {
            padding: 12px 20px;
            color: var(--text-primary);
            font-size: 14px;
            display: flex; gap: 12px;
        }
        .dots-menu span:hover { background: var(--accent); }

        .post-media {
            border-radius: 24px;
            overflow: hidden;
            margin: 12px 0;
            max-height: 300px;
        }
        .post-media img, .post-media video {
            width: 100%;
            max-height: 280px;
            object-fit: cover;
            border-radius: 20px;
        }
        .reaction-bar {
            display: flex; gap: 28px; margin: 12px 0;
        }
        .reaction-btn {
            display: flex; align-items: center; gap: 6px;
            color: var(--reaction-inactive);
            font-size: 22px;
            cursor: pointer;
            transition: 0.15s;
            user-select: none;
        }
        .reaction-btn.active-wolf { color: #b38cff; text-shadow: 0 0 8px #c78aff; }
        .reaction-btn.active-fire { color: #ff9448; text-shadow: 0 0 12px #ff6600; }
        .reaction-btn.active-heart { color: #ff69b4; text-shadow: 0 0 12px #ff3388; }

        /* –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ */
        .comment-box {
            display: flex; align-items: center;
            padding: 6px 16px; margin: 10px 0; gap: 8px;
        }
        .comment-box input {
            flex: 1; background: transparent; border: none;
            color: var(--text-primary); outline: none;
        }
        .comment-box button {
            background: var(--accent); border: none;
            border-radius: 40px; padding: 8px 16px; color: white;
        }
        .comments-list {
            max-height: 150px; overflow-y: auto;
            font-size: 14px; color: var(--text-secondary);
        }

        /* –ü—Ä–æ—Ñ–∏–ª—å */
        .profile-header {
            margin: 16px; padding: 22px 18px;
            display: flex; flex-direction: column; align-items: center;
        }
        .profile-avatar {
            width: 100px; height: 100px; border-radius: 50%;
            background: #8550e0; font-size: 50px; color: white;
            display: flex; align-items: center; justify-content: center;
            border: 4px solid var(--accent); margin-bottom: 12px;
        }
        .display-name {
            font-size: 24px; font-weight: bold; color: var(--text-primary);
            display: flex; gap: 8px;
        }
        .username { color: var(--text-secondary); margin: 4px 0 12px; }
        .stats-row {
            display: flex; gap: 28px; margin: 16px 0;
        }
        .stat-item { display: flex; flex-direction: column; align-items: center; color: var(--text-primary); }
        .follow-btn {
            background: var(--accent); border: none; border-radius: 40px;
            padding: 12px 40px; font-weight: 600; color: white;
            margin: 10px; cursor: pointer;
        }
        .new-post-btn {
            background: var(--accent); border: none; border-radius: 40px;
            padding: 10px 30px; color: white; font-weight: 600; cursor: pointer;
        }

        /* –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ */
        .settings-item {
            margin: 12px 16px; padding: 16px 20px;
            display: flex; align-items: center; gap: 18px;
            color: var(--text-primary); cursor: pointer;
        }
        /* —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è */
        .notice-item {
            margin: 12px 16px; padding: 16px 20px;
            display: flex; align-items: center; gap: 16px;
        }

        /* –∫–Ω–æ–ø–∫–∞ —á–∏—Ç–∞—Ç—å (–º–∏–Ω–∏) */
        .read-btn {
            background: transparent; border: 1px solid var(--accent);
            border-radius: 30px; padding: 4px 16px; color: var(--accent);
            font-size: 13px; font-weight: 600; cursor: pointer;
        }
        .read-btn:hover { background: var(--accent); color: white; }

        /* –∞–Ω–∏–º–∞—Ü–∏–∏ */
        .post-card, .profile-header, .settings-item { transition: transform 0.2s, box-shadow 0.3s; }
        .post-card:active { transform: scale(0.99); }

        /* –∫–∞—Å—Ç–æ–º–Ω—ã–π –ø–ª–µ–µ—Ä (—É–ø—Ä–æ—â—ë–Ω–Ω–æ) */
        video {
            border-radius: 20px;
            background: black;
        }
    </style>
</head>
<body>
    <!-- –ó–∞–≥—Ä—É–∑–æ—á–Ω—ã–π —ç–∫—Ä–∞–Ω (3 —Å–µ–∫—É–Ω–¥—ã) -->
    <div class="splash-screen" id="splash">
        <div class="splash-logo"></div>
        <div class="splash-text">Floky</div>
        <div class="splash-sub">–∑–∞–≥—Ä—É–∂–∞–µ–º –≤—Å–µ–ª–µ–Ω–Ω—É—é...</div>
    </div>

    <div class="app-container" id="appContainer">
        <!-- –®–ê–ü–ö–ê -->
        <div class="top-bar">
            <div class="logo-area" id="homeBtn">
                <div class="logo-img"></div>
                <span class="logo-text">Floky</span>
            </div>
            <div class="theme-toggle" id="themeToggle"><i class="fa-solid fa-moon"></i> <i class="fa-regular fa-sun"></i></div>
        </div>

        <!-- –ü–û–ò–°–ö –≤—Å–µ–≥–¥–∞ –≤–∏–¥–µ–Ω -->
        <div class="search-bar"><i class="fa-solid fa-search"></i><input type="text" placeholder="–ü–æ–∏—Å–∫ –≤ Floky..."></div>

        <!-- –ò—Å—Ç–æ—Ä–∏–∏ (–¥–µ–∫–æ—Ä) -->
        <div class="stories-row">
            <div class="story-item"><i class="fa-solid fa-plus"></i><span>story</span></div>
            <div class="story-item"><i class="fa-solid fa-wolf"></i><span>wolf</span></div>
            <div class="story-item"><i class="fa-regular fa-star"></i><span>night</span></div>
        </div>

        <!-- –°–ï–ö–¶–ò–ò: –≥–ª–∞–≤–Ω–∞—è (–ª–µ–Ω—Ç–∞) / library / notice / profile / settings-->
        <div id="feedSection" class="section active-section"></div>
        <div id="librarySection" class="section"><div style="color:white; padding:40px;text-align:center;"><i class="fa-regular fa-image fa-3x"></i><p>Library (–º–µ–¥–∏—Ç–µ–∫–∞)</p></div></div>
        <div id="noticeSection" class="section"></div>
        <div id="profileSection" class="section"></div>
        <div id="settingsSection" class="section"></div>

        <!-- –Ω–∏–∂–Ω–µ–µ –º–µ–Ω—é -->
        <div class="bottom-nav">
            <div class="nav-item active" data-section="feed"><i class="fa-regular fa-compass"></i><span>–ì–ª–∞–≤–Ω–∞—è</span></div>
            <div class="nav-item" data-section="library"><i class="fa-regular fa-images"></i><span>Library</span></div>
            <div class="nav-item" data-section="notice"><i class="fa-regular fa-bell"></i><span>Notice</span></div>
            <div class="nav-item" data-section="profile"><i class="fa-regular fa-user"></i><span>–ü—Ä–æ—Ñ–∏–ª—å</span></div>
            <div class="nav-item" data-section="settings"><i class="fa-solid fa-gear"></i><span>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</span></div>
        </div>
    </div>

    <script>
        (function() {
            // === –ó–ê–ì–†–£–ó–ö–ê 3 –°–ï–ö–£–ù–î–´ ===
            const splash = document.getElementById('splash');
            const app = document.getElementById('appContainer');
            setTimeout(() => {
                splash.style.opacity = '0';
                splash.style.visibility = 'hidden';
                app.classList.add('visible');
            }, 3000);

            // === –¢–ï–ú–ù–ê–Ø/–°–í–ï–¢–õ–ê–Ø –¢–ï–ú–ê ===
            const themeToggle = document.getElementById('themeToggle');
            themeToggle.addEventListener('click', () => {
                document.body.classList.toggle('light-theme');
                const icon = themeToggle.querySelector('i:first-child');
                if (document.body.classList.contains('light-theme')) {
                    icon.className = 'fa-solid fa-sun';
                } else {
                    icon.className = 'fa-solid fa-moon';
                }
            });

            // === –î–ê–ù–ù–´–ï ===
            const users = [
                { name: 'Alex Night', handle: '@alexw', avatar: 'A', followed: false },
                { name: 'Luna Flare', handle: '@luna_f', avatar: 'L', followed: true },
                { name: 'Ethan Frost', handle: '@ethanf', avatar: 'E', followed: false },
                { name: 'Ivy Moon', handle: '@ivym', avatar: 'I', followed: true },
                { name: 'Cinder Ash', handle: '@cinder', avatar: 'C', followed: false },
                { name: 'Blaze', handle: '@blaze', avatar: 'B', followed: false }
            ];

            let posts = [];
            const commentsStorage = {}; // postId -> array

            // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è 50 –ø–æ—Å—Ç–æ–≤ (–Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —Å –≤–∏–¥–µ–æ)
            function generatePosts() {
                for (let i = 1; i <= 50; i++) {
                    const user = users[i % users.length];
                    const hasVideo = i % 7 === 0;
                    const media = [];
                    if (i % 3 === 0) media.push('https://picsum.photos/400/300?random=' + i);
                    if (i % 5 === 0) media.push('https://picsum.photos/300/400?random=' + (i+50));
                    if (hasVideo) media.push('https://www.w3schools.com/html/mov_bbb.mp4'); // –≤–∏–¥–µ–æ

                    posts.push({
                        id: i,
                        user: { ...user },
                        text: '–ü–æ—Å—Ç #' + i + ' üåô‚ú® –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ Floky!',
                        media: media,
                        reactions: { wolf: false, fire: false, heart: false },
                        reactionsCount: { wolf: Math.floor(Math.random()*10), fire: Math.floor(Math.random()*8), heart: Math.floor(Math.random()*12) }
                    });
                    commentsStorage[i] = [];
                }
            }
            generatePosts();

            // –§—É–Ω–∫—Ü–∏—è —Ä–µ–Ω–¥–µ—Ä–∞ –ª–µ–Ω—Ç—ã (–≥–ª–∞–≤–Ω–∞—è)
            function renderFeed() {
                const feed = document.getElementById('feedSection');
                if (!feed) return;
                feed.innerHTML = posts.map((post, idx) => {
                    const mediaHtml = post.media.length ? post.media.map(url => 
                        url.includes('.mp4') ? `<video controls src="${url}" poster="https://picsum.photos/400/250?random=99"></video>` : `<img src="${url}" loading="lazy">`
                    ).join('') : '';

                    const postId = post.id;
                    const commentsList = (commentsStorage[postId] || []).map(c => `<div class="single-comment"><b>${c.user}</b> ${c.text}</div>`).join('');

                    // –ê–∫—Ç–∏–≤–Ω—ã–µ –∫–ª–∞—Å—Å—ã —Ä–µ–∞–∫—Ü–∏–π
                    const wolfActive = post.reactions.wolf ? 'active-wolf' : '';
                    const fireActive = post.reactions.fire ? 'active-fire' : '';
                    const heartActive = post.reactions.heart ? 'active-heart' : '';

                    return `
                    <div class="post-card" data-post-id="${post.id}">
                        <div class="post-header">
                            <div class="post-avatar" onclick="openProfile('${post.user.handle}')">${post.user.avatar}</div>
                            <div class="post-user-info" onclick="openProfile('${post.user.handle}')">
                                <div class="name">${post.user.name} <i class="fa-solid fa-check-circle" style="color:#3b82f6; font-size:14px;"></i></div>
                                <div class="handle">${post.user.handle} ‚Ä¢ 2—á</div>
                            </div>
                            <span class="read-btn" onclick="followUser('${post.user.handle}')">${post.user.followed ? '‚úî –ß–∏—Ç–∞—é' : '–ß–∏—Ç–∞—Ç—å'}</span>
                            <div class="three-dots" onclick="toggleMenu(this)"><i class="fa-solid fa-ellipsis"></i>
                                <div class="dots-menu">
                                    <span><i class="fa-regular fa-flag"></i> –ü–æ–∂–∞–ª–æ–≤–∞—Ç—å—Å—è</span>
                                    <span><i class="fa-solid fa-ban"></i> –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å</span>
                                    <span><i class="fa-regular fa-bookmark"></i> –ó–∞–ø–æ–º–Ω–∏—Ç—å</span>
                                </div>
                            </div>
                        </div>
                        <div class="post-text">${post.text}</div>
                        ${mediaHtml ? `<div class="post-media">${mediaHtml}</div>` : ''}
                        <div class="reaction-bar">
                            <div class="reaction-btn ${wolfActive}" data-reaction="wolf" data-postid="${post.id}"><i class="fa-solid fa-wolf"></i> ${post.reactionsCount.wolf}</div>
                            <div class="reaction-btn ${fireActive}" data-reaction="fire" data-postid="${post.id}"><i class="fa-solid fa-fire"></i> ${post.reactionsCount.fire}</div>
                            <div class="reaction-btn ${heartActive}" data-reaction="heart" data-postid="${post.id}"><i class="fa-solid fa-heart"></i> ${post.reactionsCount.heart}</div>
                        </div>
                        <div class="comment-section">
                            <div class="comment-box">
                                <input type="text" placeholder="–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π..." id="comment-input-${post.id}">
                                <button onclick="addComment(${post.id})">üí¨</button>
                            </div>
                            <div class="comments-list" id="comments-${post.id}">${commentsList}</div>
                        </div>
                    </div>`;
                }).join('');

                // –Ω–∞–≤–µ—Å–∏—Ç—å —Å–æ–±—ã—Ç–∏—è —Ä–µ–∞–∫—Ü–∏–π (–ø–æ—Å–ª–µ —Ä–µ–Ω–¥–µ—Ä–∞)
                document.querySelectorAll('.reaction-btn').forEach(btn => {
                    btn.addEventListener('click', function(e) {
                        e.stopPropagation();
                        const reaction = this.dataset.reaction;
                        const postId = Number(this.dataset.postid);
                        const post = posts.find(p => p.id === postId);
                        if (!post) return;

                        // –ø–µ—Ä–µ–∫–ª—é—á–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ
                        const wasActive = post.reactions[reaction];
                        post.reactions[reaction] = !wasActive;

                        // –∏–∑–º–µ–Ω—è–µ–º —Å—á—ë—Ç—á–∏–∫
                        if (!wasActive) {
                            post.reactionsCount[reaction] += 1;
                        } else {
                            post.reactionsCount[reaction] -= 1;
                        }

                        // —ç—Ñ—Ñ–µ–∫—Ç –ø–ª–∞–º–µ–Ω–∏ –µ—Å–ª–∏ fire –∞–∫—Ç–∏–≤–Ω–æ
                        if (reaction === 'fire' && !wasActive) {
                            const card = this.closest('.post-card');
                            card.classList.add('reacted-flame');
                            setTimeout(() => card.classList.remove('reacted-flame'), 700);
                        }

                        // –æ–±–Ω–æ–≤–∏—Ç—å UI –ª–µ–Ω—Ç—ã (–ø–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä–∏—Ç—å)
                        renderFeed();
                    });
                });
            }

            // –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
            window.addComment = function(postId) {
                const input = document.getElementById(`comment-input-${postId}`);
                const text = input.value.trim();
                if (!text) return;
                if (!commentsStorage[postId]) commentsStorage[postId] = [];
                commentsStorage[postId].push({ user: 'floky_user', text: text });
                renderFeed(); // —Ä–µ—Ä–µ–Ω–¥–µ—Ä
            };

            // –º–µ–Ω—é
            window.toggleMenu = function(el) {
                const menu = el.querySelector('.dots-menu');
                if (menu) menu.classList.toggle('show');
            };
            document.addEventListener('click', (e) => {
                if (!e.target.closest('.three-dots')) {
                    document.querySelectorAll('.dots-menu.show').forEach(m => m.classList.remove('show'));
                }
            });

            // –ø–æ–¥–ø–∏—Å–∫–∞/–æ—Ç–ø–∏—Å–∫–∞ (follow)
            window.followUser = function(handle) {
                const user = users.find(u => u.handle === handle);
                if (user) { user.followed = !user.followed; renderFeed(); }
            };

            // –æ—Ç–∫—Ä—ã—Ç—å –ø—Ä–æ—Ñ–∏–ª—å (–ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –ø—Ä–æ—Ñ–∏–ª—å)
            window.openProfile = function(handle) {
                // –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–µ–∫—Ü–∏—é –ø—Ä–æ—Ñ–∏–ª—è —Å –¥–∞–Ω–Ω—ã–º–∏
                const profileDiv = document.getElementById('profileSection');
                const user = users.find(u => u.handle === handle) || users[0];
                profileDiv.innerHTML = `
                    <div class="profile-header">
                        <div class="profile-avatar">${user.avatar}</div>
                        <div class="display-name">${user.name} <i class="fa-solid fa-check-circle" style="color:#3b82f6;"></i></div>
                        <div class="username">${user.handle}</div>
                        <div class="stats-row"><div class="stat-item"><span>1.2K</span><span>—á–∏—Ç–∞—Ç–µ–ª–∏</span></div><div class="stat-item"><span>386</span><span>—á–∏—Ç–∞—é</span></div><div class="stat-item"><span>50</span><span>–ø–æ—Å—Ç—ã</span></div></div>
                        <button class="follow-btn" onclick="followUser('${user.handle}'); openProfile('${user.handle}');">${user.followed ? '‚úî –ß–∏—Ç–∞—é' : '–ß–∏—Ç–∞—Ç—å'}</button>
                        <button class="new-post-btn" onclick="alert('–ù–æ–≤—ã–π –ø–æ—Å—Ç (–¥–µ–º–æ)')"><i class="fa-solid fa-plus"></i> –ù–æ–≤—ã–π –ø–æ—Å—Ç</button>
                    </div>
                    <div style="padding:16px;color:var(--text-primary)">–ü–æ—Å–ª–µ–¥–Ω–∏–µ –ø–æ—Å—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</div>
                `;
                // –¥–æ–±–∞–≤–∏–º –ø–∞—Ä—É –ø–æ—Å—Ç–æ–≤ —Ç–æ–ª—å–∫–æ —ç—Ç–æ–≥–æ —é–∑–µ—Ä–∞
                const userPosts = posts.filter(p => p.user.handle === user.handle).slice(0,3);
                userPosts.forEach(p => {
                    const postDiv = document.createElement('div');
                    postDiv.className = 'post-card';
                    postDiv.innerHTML = `<div class="post-text">${p.text} (–µ—â—ë –ø–æ—Å—Ç—ã)</div>`;
                    profileDiv.appendChild(postDiv);
                });

                // –∞–∫—Ç–∏–≤–∏—Ä—É–µ–º —Å–µ–∫—Ü–∏—é –ø—Ä–æ—Ñ–∏–ª—è
                document.querySelectorAll('.section').forEach(s => s.classList.remove('active-section'));
                profileDiv.classList.add('active-section');
                // –ø–æ–¥—Å–≤–µ—Ç–∫–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
                document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
                document.querySelector('[data-section="profile"]').classList.add('active');
            };

            // === –£–í–ï–î–û–ú–õ–ï–ù–ò–Ø (notice) ===
            function renderNotice() {
                const noticeSec = document.getElementById('noticeSection');
                noticeSec.innerHTML = `
                    <div class="notice-item"><i class="fa-regular fa-heart" style="color:#ff69b4;"></i> luna_f –æ—Ü–µ–Ω–∏–ª–∞ –≤–∞—à –ø–æ—Å—Ç</div>
                    <div class="notice-item"><i class="fa-regular fa-comment"></i> alexw –∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–ª: "–∫—Ä—É—Ç–æ!"</div>
                    <div class="notice-item"><i class="fa-regular fa-user"></i> ivym –Ω–∞—á–∞–ª–∞ —á–∏—Ç–∞—Ç—å –≤–∞—Å</div>
                    <div class="notice-item"><i class="fa-regular fa-bell"></i> –Ω–æ–≤–æ–µ –≤ Floky</div>
                `;
            }
            renderNotice();

            // === –ù–ê–°–¢–†–û–ô–ö–ò ===
            function renderSettings() {
                document.getElementById('settingsSection').innerHTML = `
                    <div class="settings-item"><i class="fa-regular fa-moon"></i> –¢—ë–º–Ω—ã–π —Ä–µ–∂–∏–º</div>
                    <div class="settings-item"><i class="fa-regular fa-language"></i> –Ø–∑—ã–∫</div>
                    <div class="settings-item"><i class="fa-regular fa-lock"></i> –ü—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å</div>
                    <div class="settings-item"><i class="fa-regular fa-circle-question"></i> –ü–æ–º–æ—â—å</div>
                `;
            }
            renderSettings();

            // === –ù–ê–í–ò–ì–ê–¶–ò–Ø ===
            const navItems = document.querySelectorAll('.nav-item');
            navItems.forEach(item => {
                item.addEventListener('click', function() {
                    const section = this.dataset.section;
                    document.querySelectorAll('.section').forEach(s => s.classList.remove('active-section'));
                    if (section === 'feed') {
                        document.getElementById('feedSection').classList.add('active-section');
                        renderFeed(); // –æ–±–Ω–æ–≤–∏—Ç—å –ª–µ–Ω—Ç—É
                    } else if (section === 'library') {
                        document.getElementById('librarySection').classList.add('active-section');
                    } else if (section === 'notice') {
                        document.getElementById('noticeSection').classList.add('active-section');
                    } else if (section === 'profile') {
                        // –æ—Ç–∫—Ä—ã—Ç—å –ø—Ä–æ—Ñ–∏–ª—å —Ç–µ–∫—É—â–µ–≥–æ
                        openProfile('@alexw');
                        return;
                    } else if (section === 'settings') {
                        document.getElementById('settingsSection').classList.add('active-section');
                    }

                    navItems.forEach(n => n.classList.remove('active'));
                    this.classList.add('active');
                });
            });

            // –∫–Ω–æ–ø–∫–∞ "–ì–ª–∞–≤–Ω–∞—è" (–ª–æ–≥–æ—Ç–∏–ø)
            document.getElementById('homeBtn').addEventListener('click', () => {
                document.querySelectorAll('.section').forEach(s => s.classList.remove('active-section'));
                document.getElementById('feedSection').classList.add('active-section');
                navItems.forEach(n => n.classList.remove('active'));
                document.querySelector('[data-section="feed"]').classList.add('active');
                renderFeed();
            });

            // –ø–µ—Ä–≤–∏—á–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä
            renderFeed();

            // –ø—Ä–µ–¥–∑–∞–ø–æ–ª–Ω–∏–º –ø—Ä–æ—Ñ–∏–ª—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∫–ª–∏–∫–µ –Ω–∞ –ø—Ä–æ—Ñ–∏–ª—å (—É–∂–µ)
        })();
    </script>
</body>
</html>